pilot-link 0.13.1 -- Palm Handheld Glue -- https://github.com/onionmixer/pilot-link

This is a fork of the original pilot-link project by desrod:
  Original repository: https://github.com/desrod/pilot-link

The code and other related files in this distribution are licensed under the
GNU General Public License or "GPL", and the GNU Lesser Public License, or
"LGPL". See http://www.fsf.org/copyleft/lesser.html for a copy of the LGPL.
We will only accept changes into pilot-link if they comply with the proper
licensing.

Although no new Palm OS devices have been released in years, this code is
still maintained. Please do send in bug reports, feature requests, and
code contributions.

Bugs and requests...: https://github.com/onionmixer/pilot-link/issues
Code contributions..: https://github.com/onionmixer/pilot-link/pulls?q=is:pr
Discussions.........: https://github.com/onionmixer/pilot-link/discussions

Upstream project:
Bugs and requests...: https://github.com/desrod/pilot-link/issues
Code contributions..: https://github.com/desrod/pilot-link/pulls?q=is:pr
Discussions.........: https://github.com/desrod/pilot-link/discussions

From the archived pilot-link website, you can find many links to helpful
documents, HOWTOs, complementary projects that use pilot-link, and other
resources to help you get the best use out of your Palm device on your
platform of choice; Linux, BSD or macOS.

Main website........: https://web.archive.org/web/2016/http://www.pilot-link.org/
HOWTO Documents.....: https://web.archive.org/web/2010/http://howto.pilot-link.org/
Code documentation..: https://web.archive.org/web/2010/http://doxygen.pilot-link.org/
List archive........: https://web.archive.org/web/2015/http://lists.pilot-link.org/


What's new in 0.13.1
---------------------

	This release includes a significant modernization effort:

	Security hardening
	  - Replaced ~120 unsafe strcpy()/sprintf() calls with bounded
	    alternatives (memcpy, snprintf, length-checked copies)
	  - Added DLP response bounds checking before argument extraction
	  - Fixed pi_dumpline() buffer overflow (256-byte boundary)
	  - Fixed pointer-size bug in libpisync/sync.c
	  - Added NULL checks for malloc()/realloc() return values (~30 sites)
	  - Added fopen()/open() return validation (~15 sites)
	  - Fixed strncpy() NULL termination issues across the codebase
	  - Fixed signal handler deadlock (replaced mutex with volatile flag)
	  - Fixed memory leaks in error paths

	Build system modernization
	  - Requires autoconf 2.71+, automake 1.16+
	  - Uses LT_INIT instead of deprecated AC_PROG_LIBTOOL
	  - Uses AC_CONFIG_HEADERS instead of AM_CONFIG_HEADER
	  - All AC_*_IFELSE forms (replaces deprecated non-IFELSE macros)
	  - Compatible with modern libpng (1.4+, removed deprecated API calls)
	  - GitHub Actions CI with gcc/clang matrix builds

	Language binding updates
	  - Python: migrated to Python 3.10 (PyLong_*, PyUnicode_*, setuptools)
	  - Java: migrated to OpenJDK 21 LTS (release="21", JNI path fix)
	  - Perl: migrated to Perl 5.34 (removed -DPERL_POLLUTE, pre-5.004 compat)
	  - Tcl: migrated to Tcl 8.6 (removed pre-Tcl 8 compat code)

	Bug fixes and feature completion
	  - PalmPix 4bpp/8bpp greyscale thumbnail reader with RGB conversion
	  - Linux USB wait_for_device via fcntl(F_GETFL) fd validation
	  - FreeBSD USB proper timeout handling with select()
	  - Bluetooth listen() error check and backlog parameter
	  - Notepad buffer advancement fix after memcpy
	  - Timezone correction using gmtime_r + mktime
	  - pilot-install-netsync DNS auto-resolution via getaddrinfo/getnameinfo
	  - pilot-read-todos now shows Private and Deleted record flags

	Test infrastructure
	  - 3 offline unit tests: packers, buffer-test, time-test (make check)
	  - Device-dependent tests available as noinst_PROGRAMS


The architecture of pilot-link
------------------------------

There are several core parts of pilot-link:

	The libraries
	-------------

	pilot-link communicates with Palm handhelds using several methods and
	functions specific to these devices.  In order to facilitate these
	communications, the functions are stored in a library, which other
	applications can link to and gain access to those functions.  J-Pilot
	is one example of an application that does exactly this.

	The core pilot-link libraries are in the 'libpisock' and 'libpisync'
	subdirectories of the project tree.

	The standard library for pilot-link is written in C (C11 compatible)
	and is easy to understand and extend if you need to do so.

	The conduits
	------------

	In pilot-link, there is also the notion of "conduits", that can be
	used to communicate directly with your Palm handheld.  These
	"conduits" are the actual applications that you run directly. These
	are the "userspace" programs.

	These "conduits" are found in the 'src' subdirectory of the project
	tree.

	The language bindings
	---------------------

	Along with the powerful libraries and conduits, pilot-link also
	provides the ability to communicate with your Palm handheld using
	your favorite language of choice.  Currently, pilot-link includes
	language "bindings" in Perl, Python, Java, and Tcl.  This means you
	can use those languages, instead of C directly, to talk to your Palm
	handheld device and communicate with it.

	The tests
	---------

	pilot-link includes offline regression tests that verify data packer
	correctness, buffer operations, and time conversion logic. Run them
	with 'make check'. Device-dependent tests (DLP, VFS, contacts, etc.)
	require a physical Palm device and are built but not installed.


Build requirements
------------------

	Required tools:
	  - C compiler: gcc or clang (C11 support)
	  - autoconf 2.71+
	  - automake 1.16+
	  - libtool
	  - bison or yacc
	  - pkg-config

	Required libraries:
	  - popt (command-line parsing; bundled fallback included)

	Optional libraries:
	  - libpng (PNG image output for notepad/screenshot/palmpix conduits)
	  - libusb (USB device communication)
	  - bluez (Bluetooth device communication, Linux only)
	  - readline (interactive shell for dlpsh)

	Optional language bindings:
	  - Python 3.10+ with SWIG 4.x
	  - OpenJDK 21+ with Ant
	  - Perl 5.34+
	  - Tcl 8.6+


Building pilot-link on Linux/Unix systems
-----------------------------------------

	pilot-link is developed primarily on Debian GNU/Linux and FreeBSD. It
	is expected to build cleanly on any POSIX-compliant platform.

	Building from git:

		$ autoreconf -fi
		$ ./configure
		$ make
		$ make check

	Building from a release tarball:

		$ ./configure
		$ make
		$ make check

	Use './configure --help' to see all available options. Some useful
	options include:

		--prefix=/path        Install to a custom location
		--with-python         Enable Python bindings
		--with-java           Enable Java bindings
		--with-perl           Enable Perl bindings
		--with-tcl            Enable Tcl bindings
		--enable-conduits     Build conduit programs

	After building and testing, install as root:

		# make install

	The most useful conduits for getting started are 'dlpsh' (interactive
	DLP shell) and 'pilot-xfer' (database transfer).

Building pilot-link on macOS
-----------------------------

	Install the required development tools via Homebrew:

		$ brew install autoconf automake libtool pkg-config libpng libusb

	Then follow the standard Linux/Unix build instructions above.

Building pilot-link on FreeBSD
------------------------------

	Please see doc/README.freebsd for FreeBSD-specific setup.

	You may need to set flags for configure to find libraries:

		$ export ACLOCAL_FLAGS="-I /usr/local/share/aclocal/"
		$ export LDFLAGS="-L/usr/local/lib"
		$ export CFLAGS="-I/usr/local/include"
		$ export CPPFLAGS="-I/usr/local/include"
		$ autoreconf -fi && ./configure && make && make check


Continuous Integration
----------------------

	pilot-link uses GitHub Actions for CI. The workflow builds with both
	gcc and clang compilers and runs 'make check' to verify all offline
	tests pass. See .github/workflows/ci.yml for details.


Some usage notes about pilot-link
---------------------------------

	The default connection rate is 9600 baud. You are welcome to try
	higher baud rates (19200, 38400, or 57600) by setting the PILOTRATE
	environment variable, but various machines have various limitations.


Debugging notes
---------------

	Please see doc/README.debugging for more detailed information
	describing how to debug pilot-link's core protocols and interfaces.


USB Notes
---------

	Please see doc/README.usb for more detailed information on
	configuring your system to use USB-enabled Palm handheld devices
	using the standard Linux "visor" kernel module.

	If you would like to use the libusb backend, please see
	doc/README.libusb for details.


Embedding information
---------------------

	If you want to use the pilot-link portability layer (configured via
	autoconf), then include pi-source.h. Otherwise, do not touch this
	file, as it sets up a mildly complex environment.

	For all normal operations, simply include the obvious files (pi-file
	for pdb and .prc file access, pi-dlp for DLP sync functions, etc.).
	pi-macros contains the portable byte-access routines.


Reporting Bugs
--------------

	Please visit https://github.com/onionmixer/pilot-link/issues to report any
	bugs you find with pilot-link. Make sure to include your operating
	system, version of pilot-link, Palm handheld type and the PalmOS
	version running on the device, and any steps required to reproduce
	the bug. Please check the existing issues first before reporting.

	For issues related to the upstream project, please visit:
	https://github.com/desrod/pilot-link/issues


License notes
-------------

	The utility programs, otherwise known collectively as "conduits"
	(pilot-xfer, dlpsh, etc.) are licensed for use under the GPL.
	For more information, please see the file COPYING included in this
	source tree.

	The libraries (libpisock, libpisync, libpisock++) and the language
	bindings (Perl, Python, Java, and Tcl) are licensed for use under the
	LGPL. For more information, please see COPYING.LIB included in this
	source tree.

	All contained source is the copyright of its author(s). Please see
	the copyright notices in the individual files for more information on
	their individual copyrights.


Happy Hacking,
--The pilot-link Team


pilot-link was originally written by Kenneth Albanowski <kjahds@kjahds.com>
and others.
